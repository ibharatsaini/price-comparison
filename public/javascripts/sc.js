var brandName=window.bn,catname=window.tw,filterBar=document.getElementById("filterBar");console.log(window.screen.height),filterBar.style.height=window.screen.height+"px",document.getElementsByClassName("results")[0].style.minHeight=window.screen.height-"150"+"px";let xhttp=new XMLHttpRequest;var response;let path=`/json/${catname}/${brandName}`;function rc(){try{console.log("try"),xhttp.open("GET",path,!1),xhttp.onreadystatechange=function(){4==this.readyState&&200==this.status&&(console.log("new"),response=this.responseText)},xhttp.send(),console.log("pehle2"),response=JSON.parse(response),document.getElementsByClassName("results")[0].innerHTML="";for(let e=0;e<response.data.length;e++)creatingBody(response.data[e])}catch{console.log("inti"),rc()}}console.log(path),rc(),console.log("pehle");var smallest=0,greatest=0;$(".divOfPopUp:first").on("click",showingAlertBox);for(let e=0;e<response.data.length;e++){let t=parseInt(response.data[e].stores[0].price),n=parseInt(response.data[smallest].stores[0].price),l=parseInt(response.data[greatest].stores[0].price);n>=t?smallest=e:l<t&&(greatest=e)}var smallNum=parseFloat(response.data[smallest].stores[0].price),greatNum=parseFloat(response.data[greatest].stores[0].price),min=document.getElementById("min"),max=document.getElementById("max");function payonDelivery(e,t,n){let l=parseFloat(t),s=parseFloat(n),a=document.getElementById("COD");if(document.getElementsByClassName("results")[0].innerHTML="",null!=a)if(a.checked)for(let t=0;t<e.length;t++){var i;for(let n=0;n<e[t].stores.length;n++)if(e[t].stores[n].hasOwnProperty("cod")){if("1"!=e[t].stores[n].cod){i=0;break}i=1}1==i&&e[t].stores[0].price>=l&&e[t].stores[0].price<=s&&creatingBody(e[t])}else for(let t=0;t<e.length;t++){let n=parseFloat(e[t].stores[0].price);n>=l&&n<=s&&creatingBody(e[t])}else for(let t=0;t<e.length;t++){let n=parseFloat(e[t].stores[0].price);n>=l&&n<=s&&creatingBody(e[t])}}function creatingBody(e){console.log("crearingbody");let t=document.getElementsByClassName("results")[0],n=document.createElement("a");n.className="resultsCont",n.href=e.url+e.name.replace("/","").replace(/ /g,"-").toLowerCase()+"/"+e.id,deviceWidth>450&&(n.target="_blank");let l=document.createElement("div");l.className="imagesOuter";let s=document.createElement("div");s.className="imageChecking";let a=document.createElement("img");a.setAttribute("src",e.image),a.className="imageClass";let i=document.createElement("div");i.className="titleDiv";let d=document.createElement("h3");if(d.className="title",d.textContent=e.name,i.appendChild(d),e.hasOwnProperty("rating")&&parseInt(e.rating)>0){var o=document.createElement("div");o.className="review";var r=document.createElement("div"),m=document.createElement("span");deviceWidth<450?m.textContent=e.rating:m.textContent=e.rating+"/5";var c=document.createElement("img");c.setAttribute("src","/images/star.png"),r.appendChild(m),r.appendChild(c),o.appendChild(r),i.appendChild(o)}let p=document.createElement("div");p.className="specsKey";let u=document.createElement("ul");var g;u.className="specList";try{for(let t=0;t<e.spec.length;t++)(g=document.createElement("li")).className="listItem",g.innerHTML=e.spec[t],u.appendChild(g);p.appendChild(u)}catch{console.log("No info avail")}let h=document.createElement("div");h.className="pricesDiv";e.stores.sort((e,t)=>parseFloat(e.price)-parseFloat(t.price));var y=document.createElement("div");if(y.className="mrpTag",e.mrp.length>0&&e.stores.length>0){let t=e.stores[0].price,n=document.createElement("span");n.innerHTML="&#x20B9;"+t;let l=parseInt(e.mrp);if(y.appendChild(n),l!==e.stores[0].price||e.stores[e.stores.length-1].price>l){let n=l>e.stores[e.stores.length-1].price?e.mrp:e.stores[e.stores.length-1].price,s=document.createElement("span");s.innerHTML="&#x20B9;"+n;let a=document.createElement("span");a.textContent=Math.round((n-t)/n*100)+"% Off!",y.appendChild(s),y.appendChild(a)}i.appendChild(y),i.appendChild(y)}else if(0==e.mrp.length&&e.stores.length>1){let t=e.stores[0].price,n=document.createElement("span");if(n.innerHTML="&#x20B9;"+t,y.appendChild(n),e.stores.length>1){let n=e.stores[e.stores.length-1].price,l=document.createElement("span");l.innerHTML="&#x20B9;"+n;let s=document.createElement("span");s.textContent=Math.round((n-t)/n*100)+"% Off!",y.appendChild(l),y.appendChild(s)}i.appendChild(y),i.appendChild(y)}else if(e.mrp.length>1){let t=e.mrp,n=document.createElement("span");n.innerHTML="&#x20B9;"+t,y.appendChild(n),i.appendChild(y),i.appendChild(y)}i.appendChild(p);var v=document.createElement("table");v.className="tableOfLogo";for(let t=0;t<e.stores.length;t++){let n=document.createElement("a"),l=document.createElement("h4"),s=document.createElement("tr"),a=document.createElement("td"),i=document.createElement("img");i.setAttribute("src",e.stores[t].logo),a.appendChild(i);let d=document.createElement("td");l.innerHTML="&#x20B9;"+e.stores[t].price,0==t?deviceWidth<450?l.style.fontSize="3vw":deviceWidth>450&&deviceWidth<1025?l.style.fontSize="2.3vw":l.style.fontSize="2vw":deviceWidth<450?l.style.fontSize="2.4vw":deviceWidth>450&&deviceWidth<1025?l.style.fontSize="1.8vw":l.style.fontSize="1.3vw",l.style.fontWeight="400",n.setAttribute("href",e.stores[t].link),n.appendChild(l),d.appendChild(n),s.appendChild(a),s.appendChild(d),v.appendChild(s)}let C=document.createElement("div");C.className="compareDivision";var f=document.createElement("label");f.className="labelOfCompare";let E=document.createElement("span");E.className="spanOfBox";var N=document.createElement("input");N.setAttribute("onclick","comp(this)");let x=document.createElement("span");x.style.display="inline-block",x.textContent="Compare Specs",x.style.marginLeft="30px",x.style.color="#551A8B",N.id=e.id,N.type="checkbox",N.name=e.sub,N.value=e.id,f.setAttribute("for",e.id);var B=document.createElement("span");B.className="spanforCheckBox",f.appendChild(N),f.appendChild(E),f.appendChild(B),f.appendChild(x),C.appendChild(f),h.appendChild(v),h.appendChild(C),s.appendChild(a),l.appendChild(s),n.appendChild(l),n.appendChild(i),n.appendChild(h),t.appendChild(n)}function animatingMessage(e,t){document.getElementsByClassName("overlay")[0].style.display="block",document.querySelector(".messageBox h4").textContent=e,document.getElementsByClassName("messageBox")[0].style.display="flex",t&&(document.querySelectorAll(".messageBox div")[0].style.display="none"),$(".messageBox div").on("click",()=>{document.getElementsByClassName("overlay")[0].style.display="none",document.querySelector(".messageBox").style.display="none",showingAlertBox()}),setTimeout(()=>{document.getElementsByClassName("overlay")[0].style.display="none",document.getElementsByClassName("messageBox")[0].style.display="none",document.querySelectorAll(".messageBox div")[0].style.display="inline-block"},6e3)}min.value=smallNum,max.value=greatNum,deviceWidth>1025?$("#slider").slider({range:!0,min:smallNum,max:greatNum,values:[smallNum,greatNum],slide:(e,t)=>{min.value=t.values[0],max.value=t.values[1]},change:(e,t)=>{t.values[0]==smallNum&&t.values[1]==greatNum?$('button[value="pr"]').css({display:"none"}):$('button[value="pr"]').css({display:"block"}),rech("change")}}):(noUiSlider.create(slider,{start:[smallNum,greatNum],connect:!0,range:{min:smallNum,max:greatNum}}),slider.noUiSlider.on("update",function(e,t){0===t?min.value=parseInt(e[t]):max.value=parseInt(e[t]),min.value==smallNum&&max.value==greatNum?$('button[value="pr"]').css({display:"none"}):$('button[value="pr"]').css({display:"block"}),rech()})),$("#min").on("change",()=>{let e=parseFloat($("#min").val()),t=parseFloat($("#max").val());e>greatNum&&(e=greatNum),e>t&&(e=t),e<smallNum&&(e=smallNum),$("#min").val(e),deviceWidth>1025?$("#slider").slider("values",0,e):(slider.noUiSlider.set([e]),console.log("inside min"))}),$("#max").on("change",()=>{let e=parseFloat($("#max").val()),t=parseFloat($("#min").val());e>greatNum&&(e=greatNum),e<t&&(e=t),e<smallNum&&(e=smallNum),$("#max").val(e),deviceWidth>1025?$("#slider").slider("values",1,e):slider.noUiSlider.set([,e])}),$(":button").on("click",function(){console.log("line 405"),val=$(this).attr("value"),"pd"==val?(console.log("line 408"),$(this).css({display:"none"}),document.getElementById("COD").checked=!1):"pr"==val&&(console.log("line 414"),$(this).css({display:"none"}),$("#min").val(smallNum),$("#max").val(greatNum),deviceWidth>1025?(console.log("line 421"),$("#slider").slider("values",0,smallNum),$("#slider").slider("values",1,greatNum)):(console.log("here"),console.log(smallNum,greatNum),slider.noUiSlider.set([smallNum,greatNum]))),rech()});var idList=[];let spanOfItem=document.createElement("div");function comp(e){let t=2;deviceWidth>640&&(t=3);let n=document.getElementsByClassName("divOfPopUp")[0];if(e.checked){if(0==idList.length&&(categ=e.name),!(e.id in idList)){if(categ!=e.name)return e.checked=!1,void animatingMessage("Select Product Of Same Category!",!1);if(!(idList.length<t))return e.checked=!1,void(deviceWidth<640?animatingMessage("Two Products Are Not Enough?",!1):animatingMessage("Three Products Are Not Enough?",!1));idList.push(e.id)}}else{var l=idList.indexOf(e.id);l==idList.length-1?idList.pop():idList.splice(l,l+1)}idList.length>0?(n.style.display="block",spanOfItem.textContent=idList.length,n.prepend(spanOfItem)):n.style.display="none"}function disabling(e){e.checked?$('button[value="pd"]').css({display:"block"}):$('button[value="pd"]').css({display:"none"}),rech("disabling")}function showingAlertBox(){console.log("init");var e=document.getElementById("alertBox"),t=document.getElementById("relating");t.innerHTML="",document.getElementById("disableBody").style.display="block",e.style.visibility="hidden",e.style.display="block";let n=document.createElement("h3");n.className="headingOfCompareAlert",n.textContent="Products To Compare";let l=document.createElement("div");l.className="divOfMainProd";for(let e=0;e<idList.length;e++)for(let t=0;t<response.data.length;t++)if(idList[e]==response.data[t].id){let e=document.createElement("div");e.className="divOfProd";let n=document.createElement("div");n.className="divOfHeadingbrand";let a=document.createElement("h3");a.textContent=response.data[t].name;var s=document.createElement("span");s.className="spanOfCloseHeading",s.innerHTML="&times;",s.style.cursor="pointer",s.style.marginRight="0px";let i=document.createElement("div");i.className="divOfImageComp";let d=document.createElement("img");d.src=response.data[t].image,d.style.maxWidth="100%",d.style.maxHeight="100%",d.className="imageOfProd",i.appendChild(d),n.appendChild(a),n.appendChild(s),e.appendChild(n),e.appendChild(i),l.appendChild(e)}t.appendChild(n),t.appendChild(l),e.style.visibility="visible";let a=window.innerWidth,i=window.innerHeight;e.style.left=a/2-e.offsetWidth/2+"px",e.style.top=i/2-e.offsetHeight/2+"px";let d=document.createElement("form");d.setAttribute("method","GET"),d.setAttribute("action","/product");let o=document.createElement("div");o.id="divOfCompareButton",o.type="submit";let r=document.createElement("h3");r.textContent="Compare",r.style.margin="auto",r.style.color="whitesmoke",r.style.fontWeight="300",o.appendChild(r);var m=document.createElement("input");m.name="pids",m.type="text",m.value=idList,m.style.display="none",d.appendChild(m),d.appendChild(o),d.style.height="10%",t.appendChild(d),$(".spanOfCloseHeading").on("click",n=>{let l=$(".spanOfCloseHeading").index(n.target);n.target.className="",document.getElementsByClassName("divOfMainProd")[0].removeChild(document.getElementsByClassName("divOfProd")[l]);let s=document.getElementsByName("pids")[0].value.split(",");document.querySelector('.results label[for="'+s[l]+'"] input').checked=!1,l==s.length-1?(s.pop(),idList.pop()):(s.splice(l,1),idList.splice(l,1)),s.length>0?(console.log(s),document.getElementsByName("pids")[0].value=s,spanOfItem.textContent=s.length):(e.style.display="none",t.innerHTML="",document.getElementsByClassName("divOfPopUp")[0].style.display="none",document.getElementById("disableBody").style.display="none",animatingMessage("Add Products To Compare",!0))}),$("#divOfCompareButton").on("click",()=>{document.getElementsByName("pids")[0].value.split(",").length>1?document.forms[0].submit():animatingMessage("Add Atleast One More Product",!0)}),$("#closePopUp span").on("click",()=>{document.getElementById("disableBody").style.display="none",document.getElementById("animating").style.display="none",document.getElementById("alertBox").style.display="none"})}function rech(e){console.log("here rech");let t=$("#sb").val(),n=JSON.parse(JSON.stringify(response)),l=document.getElementById("min").value,s=document.getElementById("max").value;"l"==t?(n.data.sort((e,t)=>e.stores[0].price-t.stores[0].price),payonDelivery(n.data,l,s)):"p"==t?(n.data.sort((e,t)=>t.stores[0].price-e.stores[0].price),payonDelivery(n.data,l,s)):payonDelivery(response.data,l,s),document.getElementsByClassName("results")[0].childElementCount<1&&(document.getElementsByClassName("results")[0].innerHTML='<div class="err" style="display:flex;"><div id="bt">No Products Found</div></div>')}spanOfItem.style.width="20px",console.log("here"),$("#sb").on("change",function(){rech("sb")});